<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deteksi Ekspresi Wajah</title>
    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f8f9fa;
        color: #333;
      }

      .navbar-brand {
        font-weight: 700;
        color: #0d6efd !important;
      }

      .hero-section {
        background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
        color: white;
        padding: 5rem 0;
        margin-bottom: 3rem;
        border-radius: 0 0 30px 30px;
      }

      .feature-card {
        transition: transform 0.3s;
        border-radius: 15px;
        overflow: hidden;
        border: none;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
      }

      .feature-card:hover {
        transform: translateY(-10px);
      }

      .emotion-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
      }

      .detection-container {
        background-color: white;
        border-radius: 15px;
        padding: 2.5rem;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        margin-top: -50px;
      }

      .video-container {
        width: 100%;
        height: 400px;
        background-color: #f0f0f0;
        border-radius: 10px;
        overflow: hidden;
        position: relative;
        margin-bottom: 20px;
      }

      .video-placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: linear-gradient(45deg, #6a11cb, #2575fc);
        color: white;
      }

      .emotion-result {
        background-color: #f8f9fa;
        border-radius: 10px;
        padding: 1.5rem;
        margin-top: 1rem;
        border-left: 5px solid #0d6efd;
      }

      .emotion-progress {
        height: 25px;
        border-radius: 5px;
      }

      .footer {
        background-color: #212529;
        color: #dee2e6;
        padding: 2rem 0;
        margin-top: 4rem;
      }

      .emotion-badge {
        font-size: 1rem;
        padding: 0.5rem 1rem;
      }

      .detection-history {
        max-height: 300px;
        overflow-y: auto;
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav
      class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top"
    >
      <div class="container">
        <a class="navbar-brand" href="#">
          <i class="bi bi-camera-reels-fill me-2"></i>FaceEmotion.ai
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link active" href="#home">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#detection">Deteksi</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#about">Tentang</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-6">
            <h1 class="display-4 fw-bold mb-3">
              Deteksi Ekspresi Wajah Secara Real-time
            </h1>
            <p class="lead mb-4">
              Gunakan teknologi AI untuk mendeteksi berbagai ekspresi wajah
              seperti bahagia, sedih, marah, terkejut, dan lainnya dengan
              akurasi tinggi.
            </p>
            <a href="#detection" class="btn btn-light btn-lg px-4 py-3"
              >Coba Sekarang <i class="bi bi-arrow-right ms-2"></i
            ></a>
          </div>
          <div class="col-lg-6">
            <div class="text-center">
              <img
                src="https://cdn.pixabay.com/photo/2020/05/18/16/17/social-media-5187243_1280.png"
                alt="Ilustrasi Deteksi Wajah"
                class="img-fluid rounded-3 shadow"
              />
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Features Section -->
    <section class="py-5">
      <div class="container">
        <div class="row text-center mb-5">
          <div class="col">
            <h2 class="fw-bold">Fitur Unggulan</h2>
            <p class="text-muted">
              Teknologi canggih untuk deteksi ekspresi wajah
            </p>
          </div>
        </div>
        <div class="row g-4">
          <div class="col-md-4">
            <div class="card feature-card h-100">
              <div class="card-body text-center p-4">
                <div class="emotion-icon text-primary">
                  <i class="bi bi-camera-video-fill"></i>
                </div>
                <h4 class="card-title">Deteksi Real-time</h4>
                <p class="card-text">
                  Deteksi ekspresi wajah langsung dari kamera web secara
                  real-time dengan akurasi tinggi.
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card feature-card h-100">
              <div class="card-body text-center p-4">
                <div class="emotion-icon text-success">
                  <i class="bi bi-emoji-smile-fill"></i>
                </div>
                <h4 class="card-title">7 Ekspresi</h4>
                <p class="card-text">
                  Mampu mengenali 7 ekspresi wajah: bahagia, sedih, marah,
                  terkejut, takut, jijik, dan netral.
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card feature-card h-100">
              <div class="card-body text-center p-4">
                <div class="emotion-icon text-warning">
                  <i class="bi bi-graph-up-arrow"></i>
                </div>
                <h4 class="card-title">Analisis Mendalam</h4>
                <p class="card-text">
                  Dapatkan analisis mendetail dengan persentase kepercayaan
                  untuk setiap ekspresi.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Detection Section -->
    <section id="detection" class="py-5 bg-light">
      <div class="container">
        <div class="detection-container">
          <div class="row mb-4">
            <div class="col">
              <h2 class="fw-bold">Deteksi Ekspresi Wajah</h2>
              <p class="text-muted">
                Aktifkan kamera Anda untuk mulai mendeteksi ekspresi wajah
              </p>
            </div>
          </div>

          <div class="row">
            <!-- Video Stream -->
            <div class="col-lg-8">
              <div class="video-container">
                <div class="video-placeholder" id="videoPlaceholder">
                  <i class="bi bi-camera-video" style="font-size: 5rem"></i>
                  <h4 class="mt-3">Kamera belum diaktifkan</h4>
                  <p class="text-center">
                    Klik tombol "Mulai Deteksi" untuk mengaktifkan kamera
                  </p>
                </div>
                <video
                  id="videoElement"
                  autoplay
                  playsinline
                  style="
                    display: none;
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                  "
                ></video>
                <canvas id="canvasElement" style="display: none"></canvas>
              </div>

              <div class="d-flex justify-content-center mb-4">
                <button id="startBtn" class="btn btn-primary btn-lg me-3">
                  <i class="bi bi-play-circle me-2"></i>Mulai Deteksi
                </button>
                <button
                  id="captureBtn"
                  class="btn btn-success btn-lg me-3"
                  disabled
                >
                  <i class="bi bi-camera me-2"></i>Ambil Gambar
                </button>
                <button id="stopBtn" class="btn btn-danger btn-lg" disabled>
                  <i class="bi bi-stop-circle me-2"></i>Hentikan
                </button>
              </div>
            </div>

            <!-- Results Panel -->
            <div class="col-lg-4">
              <div class="emotion-result">
                <h4 class="fw-bold mb-3">Hasil Deteksi</h4>
                <div id="emotionResults">
                  <p class="text-muted fst-italic">
                    Hasil deteksi akan muncul di sini setelah kamera diaktifkan
                  </p>
                </div>
              </div>

              <div class="mt-4">
                <h5 class="fw-bold mb-3">Riwayat Deteksi</h5>
                <div class="detection-history">
                  <div id="detectionHistory">
                    <div class="alert alert-light" role="alert">
                      Belum ada riwayat deteksi
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Emotion Statistics -->
          <div class="row mt-4">
            <div class="col">
              <h4 class="fw-bold mb-3">Statistik Ekspresi</h4>
              <div id="emotionStats">
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <div class="d-flex justify-content-between mb-1">
                      <span>Bahagia</span>
                      <span>0%</span>
                    </div>
                    <div class="progress emotion-progress">
                      <div
                        class="progress-bar bg-success"
                        role="progressbar"
                        style="width: 0%"
                      ></div>
                    </div>
                  </div>
                  <div class="col-md-6 mb-3">
                    <div class="d-flex justify-content-between mb-1">
                      <span>Sedih</span>
                      <span>0%</span>
                    </div>
                    <div class="progress emotion-progress">
                      <div
                        class="progress-bar bg-info"
                        role="progressbar"
                        style="width: 0%"
                      ></div>
                    </div>
                  </div>
                  <div class="col-md-6 mb-3">
                    <div class="d-flex justify-content-between mb-1">
                      <span>Marah</span>
                      <span>0%</span>
                    </div>
                    <div class="progress emotion-progress">
                      <div
                        class="progress-bar bg-danger"
                        role="progressbar"
                        style="width: 0%"
                      ></div>
                    </div>
                  </div>
                  <div class="col-md-6 mb-3">
                    <div class="d-flex justify-content-between mb-1">
                      <span>Terkejut</span>
                      <span>0%</span>
                    </div>
                    <div class="progress emotion-progress">
                      <div
                        class="progress-bar bg-warning"
                        role="progressbar"
                        style="width: 0%"
                      ></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-5">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto text-center">
            <h2 class="fw-bold mb-4">Tentang FaceEmotion.ai</h2>
            <p class="lead mb-4">
              FaceEmotion.ai adalah platform berbasis web yang menggunakan
              teknologi machine learning untuk mendeteksi ekspresi wajah
              manusia. Sistem ini dapat mengenali berbagai emosi dengan akurasi
              tinggi dan dapat digunakan untuk berbagai aplikasi seperti
              penelitian psikologi, analisis perilaku konsumen, dan pengembangan
              teknologi interaksi manusia-komputer.
            </p>
            <p>
              Platform ini dibangun menggunakan teknologi terkini seperti
              TensorFlow.js untuk model machine learning dan Bootstrap 5 untuk
              antarmuka yang responsif.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <h5><i class="bi bi-camera-reels-fill me-2"></i>FaceEmotion.ai</h5>
            <p>
              Platform deteksi ekspresi wajah berbasis AI dengan akurasi tinggi.
            </p>
          </div>
          <div class="col-md-3">
            <h5>Menu</h5>
            <ul class="list-unstyled">
              <li>
                <a href="#home" class="text-decoration-none text-light">Home</a>
              </li>
              <li>
                <a href="#detection" class="text-decoration-none text-light"
                  >Deteksi</a
                >
              </li>
              <li>
                <a href="#about" class="text-decoration-none text-light"
                  >Tentang</a
                >
              </li>
            </ul>
          </div>
          <div class="col-md-3">
            <h5>Kontak</h5>
            <ul class="list-unstyled">
              <li><i class="bi bi-envelope me-2"></i>info@faceemotion.ai</li>
              <li><i class="bi bi-telephone me-2"></i>+62 812 3456 7890</li>
            </ul>
          </div>
        </div>
        <hr class="mt-4 mb-4" />
        <div class="row">
          <div class="col text-center">
            <p>&copy; 2023 FaceEmotion.ai. All rights reserved.</p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- JavaScript for Face Detection Simulation -->
    <script>
      // Elemen DOM
      const videoElement = document.getElementById("videoElement");
      const canvasElement = document.getElementById("canvasElement");
      const videoPlaceholder = document.getElementById("videoPlaceholder");
      const startBtn = document.getElementById("startBtn");
      const stopBtn = document.getElementById("stopBtn");
      const captureBtn = document.getElementById("captureBtn");
      const emotionResults = document.getElementById("emotionResults");
      const detectionHistory = document.getElementById("detectionHistory");
      const progressBars = document.querySelectorAll(".progress-bar");
      const progressTexts = document.querySelectorAll(
        ".d-flex.justify-content-between span:last-child",
      );

      // Daftar emosi dan warna yang sesuai
      const emotions = [
        { name: "Bahagia", color: "success", icon: "emoji-smile" },
        { name: "Sedih", color: "info", icon: "emoji-frown" },
        { name: "Marah", color: "danger", icon: "emoji-angry" },
        { name: "Terkejut", color: "warning", icon: "emoji-surprise" },
        { name: "Takut", color: "secondary", icon: "emoji-dizzy" },
        { name: "Jijik", color: "dark", icon: "emoji-expressionless" },
        { name: "Netral", color: "primary", icon: "emoji-neutral" },
      ];

      // Statistik emosi
      let emotionStats = {
        Bahagia: 0,
        Sedih: 0,
        Marah: 0,
        Terkejut: 0,
        Takut: 0,
        Jijik: 0,
        Netral: 0,
      };

      // Riwayat deteksi
      let detectionCount = 0;

      // Fungsi untuk menghasilkan angka acak antara min dan max
      function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      // Fungsi untuk mensimulasikan deteksi emosi
      function simulateEmotionDetection() {
        // Reset semua nilai
        const emotionValues = {};
        let total = 0;

        // Generate nilai acak untuk setiap emosi
        emotions.forEach((emotion) => {
          const value = getRandomInt(5, 95);
          emotionValues[emotion.name] = value;
          total += value;
        });

        // Normalisasi nilai agar totalnya 100%
        const normalizedValues = {};
        Object.keys(emotionValues).forEach((emotion) => {
          normalizedValues[emotion] = Math.round(
            (emotionValues[emotion] / total) * 100,
          );
        });

        // Cari emosi dengan nilai tertinggi
        let dominantEmotion = "";
        let highestValue = 0;

        Object.keys(normalizedValues).forEach((emotion) => {
          if (normalizedValues[emotion] > highestValue) {
            highestValue = normalizedValues[emotion];
            dominantEmotion = emotion;
          }
        });

        return { normalizedValues, dominantEmotion, highestValue };
      }

      // Fungsi untuk memperbarui tampilan hasil emosi
      function updateEmotionResults(results) {
        const { normalizedValues, dominantEmotion, highestValue } = results;

        // Tampilkan emosi dominan
        const dominantEmotionObj = emotions.find(
          (e) => e.name === dominantEmotion,
        );
        emotionResults.innerHTML = `
                <div class="text-center mb-3">
                    <span class="badge bg-${dominantEmotionObj.color} emotion-badge p-3">
                        <i class="bi bi-${dominantEmotionObj.icon} me-2"></i>
                        ${dominantEmotion} (${highestValue}%)
                    </span>
                </div>
                <p class="mb-3">Ekspresi yang terdeteksi:</p>
            `;

        // Tampilkan semua emosi dengan progress bar
        emotions.forEach((emotion) => {
          const value = normalizedValues[emotion.name];
          emotionResults.innerHTML += `
                    <div class="d-flex justify-content-between mb-1">
                        <span>${emotion.name}</span>
                        <span>${value}%</span>
                    </div>
                    <div class="progress mb-3" style="height: 10px;">
                        <div class="progress-bar bg-${emotion.color}" role="progressbar" style="width: ${value}%"></div>
                    </div>
                `;
        });

        // Tambahkan ke statistik
        emotionStats[dominantEmotion]++;
        detectionCount++;

        // Perbarui statistik
        updateEmotionStats();

        // Tambahkan ke riwayat deteksi
        addToDetectionHistory(dominantEmotion, highestValue);
      }

      // Fungsi untuk memperbarui statistik emosi
      function updateEmotionStats() {
        const totalDetections = Object.values(emotionStats).reduce(
          (a, b) => a + b,
          0,
        );

        emotions.forEach((emotion, index) => {
          const count = emotionStats[emotion.name];
          const percentage =
            totalDetections > 0
              ? Math.round((count / totalDetections) * 100)
              : 0;

          if (progressBars[index]) {
            progressBars[index].style.width = `${percentage}%`;
          }

          if (progressTexts[index]) {
            progressTexts[index].textContent = `${percentage}%`;
          }
        });
      }

      // Fungsi untuk menambahkan ke riwayat deteksi
      function addToDetectionHistory(emotion, confidence) {
        const emotionObj = emotions.find((e) => e.name === emotion);
        const time = new Date().toLocaleTimeString([], {
          hour: "2-digit",
          minute: "2-digit",
        });

        // Hapus placeholder jika ada
        if (detectionHistory.querySelector(".alert-light")) {
          detectionHistory.innerHTML = "";
        }

        // Batasi riwayat hingga 5 item
        if (detectionHistory.children.length >= 5) {
          detectionHistory.removeChild(detectionHistory.lastChild);
        }

        // Tambahkan item baru di atas
        const historyItem = document.createElement("div");
        historyItem.className =
          "alert alert-light d-flex justify-content-between align-items-center";
        historyItem.innerHTML = `
                <div>
                    <i class="bi bi-${emotionObj.icon} text-${emotionObj.color} me-2"></i>
                    <strong>${emotion}</strong>
                    <small class="text-muted ms-2">${confidence}%</small>
                </div>
                <small class="text-muted">${time}</small>
            `;

        detectionHistory.prepend(historyItem);
      }

      // Event listener untuk tombol Mulai Deteksi
      startBtn.addEventListener("click", function () {
        // Simulasi mengaktifkan kamera
        videoPlaceholder.style.display = "none";
        videoElement.style.display = "block";

        // Update tombol
        startBtn.disabled = true;
        stopBtn.disabled = false;
        captureBtn.disabled = false;

        // Mulai simulasi deteksi setiap 3 detik
        window.detectionInterval = setInterval(() => {
          const results = simulateEmotionDetection();
          updateEmotionResults(results);
        }, 3000);

        // Deteksi pertama
        const results = simulateEmotionDetection();
        updateEmotionResults(results);
      });

      // Event listener untuk tombol Hentikan
      stopBtn.addEventListener("click", function () {
        // Simulasi menonaktifkan kamera
        videoPlaceholder.style.display = "flex";
        videoElement.style.display = "none";

        // Update tombol
        startBtn.disabled = false;
        stopBtn.disabled = true;
        captureBtn.disabled = true;

        // Hentikan interval deteksi
        clearInterval(window.detectionInterval);

        // Reset hasil deteksi
        emotionResults.innerHTML =
          '<p class="text-muted fst-italic">Hasil deteksi akan muncul di sini setelah kamera diaktifkan</p>';
      });

      // Event listener untuk tombol Ambil Gambar
      captureBtn.addEventListener("click", function () {
        // Simulasi pengambilan gambar
        const results = simulateEmotionDetection();
        updateEmotionResults(results);

        // Tampilkan pesan sukses
        const originalText = captureBtn.innerHTML;
        captureBtn.innerHTML =
          '<i class="bi bi-check-circle me-2"></i>Gambar Diambil!';
        captureBtn.classList.remove("btn-success");
        captureBtn.classList.add("btn-secondary");

        setTimeout(() => {
          captureBtn.innerHTML = originalText;
          captureBtn.classList.remove("btn-secondary");
          captureBtn.classList.add("btn-success");
        }, 1500);
      });

      // Inisialisasi
      updateEmotionStats();
    </script>
  </body>
</html>
