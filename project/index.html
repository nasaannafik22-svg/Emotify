<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emotify | Real-Time Emotion Detection</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Navigasi -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: var(--primary-color);">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-smile-beam me-2"></i>
                Emotify
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="index.html"><i class="fas fa-home me-1"></i> Beranda</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="tentang.html"><i class="fas fa-info-circle me-1"></i> Tentang</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Konten Utama -->
    <div class="container my-5">
        <!-- Header -->
        <div class="row mb-4">
            <div class="col-12">
                <h1 class="display-5 fw-bold text-center mb-3" style="color: var(--primary-color);">
                    <i class="fas fa-brain me-2"></i>Deteksi Emosi Real-Time
                </h1>
                <p class="text-center text-muted mb-0">
                    Deteksi ekspresi wajah real-time langsung di browser menggunakan Face-API.js.
                </p>
                <div class="text-center mt-2">
                    <span id="modelStatus" class="model-status loading">
                        <i class="fas fa-sync-alt fa-spin me-1"></i> Memuat model deteksi wajah & ekspresi...
                    </span>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Kolom Kiri - Feed Video -->
            <div class="col-lg-8 mb-4">
                <div class="card border-0 shadow">
                    <div class="card-header border-0">
                        <i class="fas fa-video me-2"></i> Kamera Langsung dengan Deteksi Wajah & Ekspresi
                    </div>
                    <div class="card-body p-3">
                        <div class="video-container">
                            <div id="loadingOverlay" class="loading-overlay">
                                <div class="text-center">
                                    <div class="spinner-border mb-3" role="status"></div>
                                    <p>Menyalakan kamera... Harap izinkan akses ke webcam Anda</p>
                                </div>
                            </div>
                            <video id="video" width="720" height="560" autoplay muted playsinline></video>
                            <canvas id="overlay"></canvas>
                            <div id="detectionInfo" class="detection-info" style="display: none;">
                                <i class="fas fa-user me-1"></i><span id="faceCount">0</span> wajah terdeteksi
                            </div>
                        </div>

                        <div class="controls mt-4">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label class="form-label">Sensitivitas Deteksi</label>
                                    <input type="range" class="form-range" id="sensitivityRange" min="0.1" max="1.0"
                                        step="0.1" value="0.5">
                                    <div class="d-flex justify-content-between">
                                        <small>Rendah</small>
                                        <small>Tinggi</small>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label class="form-label">Frekuensi Pembaruan</label>
                                    <input type="range" class="form-range" id="frequencyRange" min="50" max="500"
                                        step="50" value="150">
                                    <div class="d-flex justify-content-between">
                                        <small>Cepat</small>
                                        <small>Lambat</small>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label class="form-label">Transparansi Overlay</label>
                                    <input type="range" class="form-range" id="opacityRange" min="0.1" max="1.0"
                                        step="0.1" value="0.7">
                                    <div class="d-flex justify-content-between">
                                        <small>Rendah</small>
                                        <small>Tinggi</small>
                                    </div>
                                </div>
                            </div>

                            <div class="d-flex flex-wrap justify-content-center gap-2">
                                <button id="startBtn" class="btn btn-success btn-lg" disabled>
                                    <i class="fas fa-play me-2"></i> Mulai Deteksi
                                </button>
                                <button id="stopBtn" class="btn btn-danger btn-lg" disabled>
                                    <i class="fas fa-stop me-2"></i> Hentikan Deteksi
                                </button>
                                <button id="toggleCameraBtn" class="btn btn-warning btn-lg">
                                    <i class="fas fa-video-slash me-2"></i> Matikan Kamera
                                </button>
                                <button id="screenshotCameraBtn" class="btn btn-info btn-lg">
                                    <i class="fas fa-camera me-2"></i> Screenshot Kamera
                                </button>
                                <button id="screenshotResultBtn" class="btn btn-primary btn-lg">
                                    <i class="fas fa-chart-bar me-2"></i> Screenshot Hasil
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Kolom Kanan - Hasil Emosi -->
            <div class="col-lg-4 mb-4">
                <div class="card border-0 shadow h-100">
                    <div class="card-header border-0">
                        <i class="fas fa-chart-bar me-2"></i> Analisis Emosi
                    </div>
                    <div class="card-body">
                        <div class="text-center mb-4">
                            <h5 id="dominantEmotion" class="fw-bold" style="color: var(--primary-color);">
                                Menunggu deteksi...
                            </h5>
                            <p class="text-muted small" id="detectionStatus">Menunggu hasil pendeteksian...</p>
                        </div>
                        <div class="text-center mt-4">
                            <h6>Sticker Emosi</h6>
                            <img id="stickerPreview" width="200" class="img-fluid mb-3"/>
                            <br>
                            <button id="downloadStickerBtn" class="btn btn-success">
                                Download Sticker
                            </button>
                        </div>

                        <div class="mb-4">
                            <h6 class="fw-bold mb-3">Emosi yang Terdeteksi</h6>
                            <div id="emotionBadges" class="d-flex flex-wrap">
                                <!-- Badge emosi akan ditambahkan di sini oleh JavaScript -->
                                <span class="emotion-badge bg-secondary">Netral: 0%</span>
                                <span class="emotion-badge bg-secondary">Senang: 0%</span>
                                <span class="emotion-badge bg-secondary">Sedih: 0%</span>
                                <span class="emotion-badge bg-secondary">Marah: 0%</span>
                                <span class="emotion-badge bg-secondary">Takut: 0%</span>
                                <span class="emotion-badge bg-secondary">Jijik: 0%</span>
                                <span class="emotion-badge bg-secondary">Terkejut: 0%</span>
                            </div>
                        </div>

                        <div class="mb-4">
                            <h6 class="fw-bold mb-3">Intensitas Emosi</h6>
                            <div id="emotionProgressBars">
                                <!-- Bar progres akan ditambahkan di sini oleh JavaScript -->
                                <div class="mb-2">
                                    <div class="d-flex justify-content-between">
                                        <span>Netral</span>
                                        <span>0%</span>
                                    </div>
                                    <div class="progress emotion-progress">
                                        <div class="progress-bar bg-secondary" role="progressbar" style="width: 0%">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-4">
                            <div class="col-6">
                                <div class="stat-card">
                                    <div class="stat-value" id="facesDetected">0</div>
                                    <div class="stat-label">Wajah Terdeteksi</div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="stat-card">
                                    <div class="stat-value" id="detectionFPS">0</div>
                                    <div class="stat-label">FPS Deteksi</div>
                                </div>
                            </div>
                        </div>

                        <div class="alert alert-info mt-4">
                            <i class="fas fa-info-circle me-2"></i>
                            <strong>Tip:</strong> Pastikan wajah Anda cukup cahaya dan terlihat jelas untuk deteksi yang
                            akurat.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Informasi Model -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card border-0 shadow">
                    <div class="card-header border-0">
                        <i class="fas fa-microchip me-2"></i> Informasi Model AI
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <h6><i class="fas fa-robot me-2"></i> Model Deteksi Wajah</h6>
                                <p class="mb-0 small">Tiny Face Detector â€“ model ringan berbasis TensorFlow.js yang
                                    berjalan langsung di browser.</p>
                            </div>
                            <div class="col-md-4 mb-3">
                                <h6><i class="fas fa-map-marker-alt me-2"></i> Landmark Wajah</h6>
                                <p class="mb-0 small">Deteksi 68 titik landmark wajah untuk memahami struktur dan posisi
                                    wajah.</p>
                            </div>
                            <div class="col-md-4 mb-3">
                                <h6><i class="fas fa-smile me-2"></i> Pengenalan Emosi</h6>
                                <p class="mb-0 small">Klasifikasi 7 ekspresi dasar menggunakan model Face-API.js.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>Emotify</h5>
                    <p class="mb-0">Deteksi ekspresi wajah real-time langsung di browser menggunakan Face-API.js.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">
                        Didukung oleh <a href="https://github.com/justadudewhohacks/face-api.js"
                            class="text-success">Face-API.js</a>
                        dan <a href="https://getbootstrap.com" class="text-success">Bootstrap 5</a>
                    </p>
                    <p class="mb-0 mt-2">&copy; 2026 Emotify. Hak cipta dilindungi.</p>
                </div>
            </div>
        </div>
    </footer>
    

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- html2canvas untuk screenshot -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <!-- Skrip Aplikasi Utama -->
    <script src="script.js"> </script>
</body>

</html>